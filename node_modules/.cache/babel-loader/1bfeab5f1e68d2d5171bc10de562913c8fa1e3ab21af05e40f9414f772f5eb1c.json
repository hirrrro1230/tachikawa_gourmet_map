{"ast":null,"code":"\"use strict\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\nvar Raty = /*#__PURE__*/function () {\n  function Raty(element) {\n    var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    _classCallCheck(this, Raty);\n    this.element = element;\n    this.opt = _objectSpread(_objectSpread(_objectSpread({}, this.defaultOptions()), options), this._parseOptions(element.dataset));\n  }\n  _createClass(Raty, [{\n    key: \"defaultOptions\",\n    value: function defaultOptions() {\n      return {\n        cancelButton: false,\n        cancelClass: 'raty-cancel',\n        cancelHint: 'Cancel this rating!',\n        cancelOff: 'cancel-off.png',\n        cancelOn: 'cancel-on.png',\n        cancelPlace: 'left',\n        click: undefined,\n        half: false,\n        halfShow: true,\n        hints: ['bad', 'poor', 'regular', 'good', 'gorgeous'],\n        iconRange: undefined,\n        iconRangeSame: false,\n        mouseout: undefined,\n        mouseover: undefined,\n        noRatedMsg: 'Not rated yet!',\n        number: 5,\n        numberMax: 20,\n        path: undefined,\n        precision: false,\n        readOnly: false,\n        round: {\n          down: 0.25,\n          full: 0.6,\n          up: 0.76\n        },\n        score: undefined,\n        scoreName: 'score',\n        single: false,\n        space: true,\n        starHalf: 'star-half.png',\n        starOff: 'star-off.png',\n        starOn: 'star-on.png',\n        starType: 'img',\n        target: undefined,\n        targetFormat: '{score}',\n        targetKeep: false,\n        targetScore: undefined,\n        targetText: '',\n        targetType: 'hint'\n      };\n    }\n  }, {\n    key: \"cancel\",\n    value: function cancel(click) {\n      if (!this._isReadOnly()) {\n        this[click ? 'click' : 'score'](null);\n        this.scoreField.removeAttribute('value');\n      }\n    }\n  }, {\n    key: \"click\",\n    value: function click(score) {\n      if (!this._isReadOnly()) {\n        score = this._adjustedScore(score);\n        this._apply(score);\n        if (this.opt.click) {\n          this.opt.click.call(this, score, this.element);\n        }\n        this._target(score);\n      }\n    }\n  }, {\n    key: \"move\",\n    value: function move(score) {\n      var integer = parseInt(score, 10);\n      var decimal = this._getDecimal(score, 1);\n      if (integer >= this.opt.number) {\n        integer = this.opt.number - 1;\n        decimal = 10;\n      }\n      var width = this._getWidth();\n      var steps = width / 10;\n      var star = this.stars[integer];\n      var percent = star.offsetLeft + steps * decimal;\n      var evt = new Event('mousemove');\n      evt.pageX = percent;\n      this.isMove = true;\n      star.dispatchEvent(evt);\n      this.isMove = false;\n    }\n  }, {\n    key: \"readOnly\",\n    value: function readOnly(readonly) {\n      if (this._isReadOnly() !== readonly) {\n        if (readonly) {\n          this._lock();\n        } else {\n          this._binds();\n          this._unlock();\n        }\n        this.element.dataset.readOnly = readonly;\n      }\n    }\n  }, {\n    key: \"score\",\n    value: function score() {\n      return arguments.length ? this.setScore(arguments[0]) : this.getScore();\n    }\n  }, {\n    key: \"setScore\",\n    value: function setScore(score) {\n      if (!this._isReadOnly()) {\n        score = this._adjustedScore(score);\n        this._apply(score);\n        this._target(score);\n      }\n    }\n  }, {\n    key: \"getScore\",\n    value: function getScore() {\n      var score = [];\n      var value;\n      value = this.scoreField.value;\n      score.push(value ? +value : undefined);\n      return score.length > 1 ? score : score[0];\n    }\n  }, {\n    key: \"init\",\n    value: function init() {\n      this._executeCallbacks();\n      this._adjustNumber();\n      this._adjustHints();\n      this.opt.score = this._adjustedScore(this.opt.score);\n      if (this.opt.starType !== 'img') {\n        this._adjustStarName();\n      }\n      this._setPath();\n      this._createStars();\n      if (this.opt.cancelButton) {\n        this._createCancel();\n      }\n      if (this.opt.precision) {\n        this._adjustPrecision();\n      }\n      this._createScore();\n      this._apply(this.opt.score);\n      this._setTitle(this.opt.score);\n      this._target(this.opt.score);\n      if (this.opt.readOnly) {\n        this._lock();\n      } else {\n        this.element.style.cursor = 'pointer';\n        this._binds();\n      }\n      return this;\n    }\n  }, {\n    key: \"_adjustedScore\",\n    value: function _adjustedScore(score) {\n      if (score || score === 0) {\n        return this._between(score, 0, this.opt.number);\n      }\n    }\n  }, {\n    key: \"_adjustHints\",\n    value: function _adjustHints() {\n      if (!this.opt.hints) {\n        this.opt.hints = [];\n      }\n      if (!this.opt.halfShow && !this.opt.half) {\n        return;\n      }\n      var steps = this.opt.precision ? 10 : 2;\n      for (var i = 0; i < this.opt.number; i++) {\n        var group = this.opt.hints[i];\n        if (Object.prototype.toString.call(group) !== '[object Array]') {\n          group = [group];\n        }\n        this.opt.hints[i] = [];\n        for (var j = 0; j < steps; j++) {\n          var hint = group[j];\n          var last = group[group.length - 1];\n          if (last === undefined) {\n            last = null;\n          }\n          this.opt.hints[i][j] = hint === undefined ? last : hint;\n        }\n      }\n    }\n  }, {\n    key: \"_adjustNumber\",\n    value: function _adjustNumber() {\n      this.opt.number = this._between(this.opt.number, 1, this.opt.numberMax);\n    }\n  }, {\n    key: \"_adjustPrecision\",\n    value: function _adjustPrecision() {\n      this.opt.half = true;\n    }\n  }, {\n    key: \"_adjustStarName\",\n    value: function _adjustStarName() {\n      var replaces = ['cancelOff', 'cancelOn', 'starHalf', 'starOff', 'starOn'];\n      this.opt.path = '';\n      for (var i = 0; i < replaces.length; i++) {\n        this.opt[replaces[i]] = this.opt[replaces[i]].replace('.', '-');\n      }\n    }\n  }, {\n    key: \"_apply\",\n    value: function _apply(score) {\n      this._fill(score);\n      if (score) {\n        if (score > 0) {\n          this.scoreField.value = score;\n        }\n        this._roundStars(score);\n      }\n    }\n  }, {\n    key: \"_attributesForIndex\",\n    value: function _attributesForIndex(i) {\n      var name = this._nameForIndex(i);\n      var attributes = {\n        alt: i,\n        src: this.opt.path + this.opt[name]\n      };\n      if (this.opt.starType !== 'img') {\n        attributes = {\n          'data-alt': i,\n          'class': this.opt[name]\n        };\n      }\n      attributes.title = this._getHint(i);\n      return attributes;\n    }\n  }, {\n    key: \"_between\",\n    value: function _between(value, min, max) {\n      return Math.min(Math.max(parseFloat(value), min), max);\n    }\n  }, {\n    key: \"_binds\",\n    value: function _binds() {\n      if (this.cancelButton) {\n        this._bindOverCancel();\n        this._bindClickCancel();\n        this._bindOutCancel();\n      }\n      this._bindOver();\n      this._bindClick();\n      this._bindOut();\n    }\n  }, {\n    key: \"_bindClick\",\n    value: function _bindClick() {\n      var _this = this;\n      this.stars.forEach(function (value) {\n        value.addEventListener('click', function (evt) {\n          if (_this._isReadOnly()) {\n            return;\n          }\n          var execute;\n          var score = _this.opt.half || _this.opt.precision ? _this.element.dataset.score : value.alt || value.dataset.alt;\n          if (_this.opt.half && !_this.opt.precision) {\n            score = _this._roundHalfScore(score);\n          }\n          if (_this.opt.click) {\n            execute = _this.opt.click.call(_this, +score, _this.element, evt);\n          }\n          if (execute || execute === undefined) {\n            _this._apply(+score);\n          }\n        });\n      });\n    }\n  }, {\n    key: \"_bindClickCancel\",\n    value: function _bindClickCancel() {\n      var _this2 = this;\n      this.cancelButton.addEventListener('click', function (evt) {\n        _this2.scoreField.removeAttribute('value');\n        if (_this2.opt.click) {\n          _this2.opt.click.call(_this2, null, _this2.element, evt);\n        }\n      });\n    }\n  }, {\n    key: \"_bindOut\",\n    value: function _bindOut() {\n      var _this3 = this;\n      this.element.addEventListener('mouseleave', function (evt) {\n        var score = +_this3.scoreField.value || undefined;\n        _this3._apply(score);\n        _this3._target(score, evt);\n        _this3._resetTitle();\n        if (_this3.opt.mouseout) {\n          _this3.opt.mouseout.call(_this3, score, _this3.element, evt);\n        }\n      });\n    }\n  }, {\n    key: \"_bindOutCancel\",\n    value: function _bindOutCancel() {\n      var _this4 = this;\n      this.cancelButton.addEventListener('mouseleave', function (evt) {\n        var icon = _this4.opt.cancelOff;\n        if (_this4.opt.starType !== 'img') {\n          icon = \"\".concat(_this4.opt.cancelClass, \" \").concat(icon);\n        }\n        _this4._setIcon(_this4.cancelButton, icon);\n        if (_this4.opt.mouseout) {\n          var score = +_this4.scoreField.value || undefined;\n          _this4.opt.mouseout.call(_this4, score, _this4.element, evt);\n        }\n      });\n    }\n  }, {\n    key: \"_bindOver\",\n    value: function _bindOver() {\n      var _this5 = this;\n      var action = this.opt.half ? 'mousemove' : 'mouseover';\n      this.stars.forEach(function (value) {\n        value.addEventListener(action, function (evt) {\n          var score = _this5._getScoreByPosition(evt, value);\n          _this5._fill(score);\n          if (_this5.opt.half) {\n            _this5._roundStars(score, evt);\n            _this5._setTitle(score, evt);\n            _this5.element.dataset.score = score;\n          }\n          _this5._target(score, evt);\n          if (_this5.opt.mouseover) {\n            _this5.opt.mouseover.call(_this5, score, _this5.element, evt);\n          }\n        });\n      });\n    }\n  }, {\n    key: \"_bindOverCancel\",\n    value: function _bindOverCancel() {\n      var _this6 = this;\n      this.cancelButton.addEventListener('mouseover', function (evt) {\n        if (_this6._isReadOnly()) {\n          return;\n        }\n        var starOff = _this6.opt.path + _this6.opt.starOff;\n        var icon = _this6.opt.cancelOn;\n        if (_this6.opt.starType === 'img') {\n          _this6.stars.forEach(function (value) {\n            value.src = starOff;\n          });\n        } else {\n          icon = _this6.opt.cancelClass + ' ' + icon;\n          _this6.stars.forEach(function (value) {\n            value.className = starOff;\n          });\n        }\n        _this6._setIcon(_this6.cancelButton, icon);\n        _this6._target(null, evt);\n        if (_this6.opt.mouseover) {\n          _this6.opt.mouseover.call(_this6, null, _this6.element, evt);\n        }\n      });\n    }\n  }, {\n    key: \"_buildScoreField\",\n    value: function _buildScoreField() {\n      var input = document.createElement('input');\n      input.name = this.opt.scoreName;\n      input.type = 'hidden';\n      this.element.appendChild(input);\n      return input;\n    }\n  }, {\n    key: \"_createCancel\",\n    value: function _createCancel() {\n      var button = document.createElement(this.opt.starType);\n      var icon = this.opt.path + this.opt.cancelOff;\n      button.setAttribute('class', this.opt.cancelClass);\n      button.setAttribute('title', this.opt.cancelHint);\n      if (this.opt.starType === 'img') {\n        button.setAttribute('alt', 'x');\n        button.setAttribute('src', icon);\n      } else {\n        button.classList.add(icon);\n        button.setAttribute('data-alt', 'x');\n      }\n      if (this.opt.cancelPlace === 'left') {\n        this.element.prepend(\"\\xA0\");\n        this.element.prepend(button);\n      } else {\n        this.element.append(\"\\xA0\");\n        this.element.appendChild(button);\n      }\n      this.cancelButton = button;\n    }\n  }, {\n    key: \"_createScore\",\n    value: function _createScore() {\n      this.scoreField = document.querySelector(this.opt.targetScore) || this._buildScoreField();\n    }\n  }, {\n    key: \"_createStars\",\n    value: function _createStars() {\n      for (var i = 1; i <= this.opt.number; i++) {\n        var attributes = this._attributesForIndex(i);\n        var star = document.createElement(this.opt.starType);\n        for (var key in attributes) {\n          star.setAttribute(key, attributes[key]);\n        }\n        this.element.appendChild(star);\n        if (this.opt.space && i < this.opt.number) {\n          this.element.append(\"\\xA0\");\n        }\n      }\n      this.stars = this.element.querySelectorAll(this.opt.starType);\n    }\n  }, {\n    key: \"_error\",\n    value: function _error(message) {\n      throw new Error(message);\n    }\n  }, {\n    key: \"_executeCallbacks\",\n    value: function _executeCallbacks() {\n      var options = ['number', 'readOnly', 'score', 'scoreName', 'target', 'path'];\n      for (var i = 0; i < options.length; i++) {\n        if (typeof this.opt[options[i]] === 'function') {\n          var value = this.opt[options[i]].call(this, this.element);\n          if (value) {\n            this.opt[options[i]] = value;\n          } else {\n            delete this.opt[options[i]];\n          }\n        }\n      }\n    }\n  }, {\n    key: \"_fill\",\n    value: function _fill(score) {\n      var hash = 0;\n      if (this.opt.iconRangeSame && this.opt.iconRange) {\n        while (hash < this.opt.iconRange.length && this.opt.iconRange[hash].range < score) {\n          hash++;\n        }\n      }\n      for (var i = 1; i <= this.stars.length; i++) {\n        var star = this.stars[i - 1];\n        var turnOn = this._turnOn(i, score);\n        var icon = void 0;\n        if (this.opt.iconRange && this.opt.iconRange.length > hash) {\n          var irange = this.opt.iconRange[hash];\n          icon = this._getRangeIcon(irange, turnOn);\n          if (i <= irange.range) {\n            this._setIcon(star, icon);\n          }\n          if (i === irange.range) {\n            hash++;\n          }\n        } else {\n          icon = this.opt[turnOn ? 'starOn' : 'starOff'];\n          this._setIcon(star, icon);\n        }\n      }\n    }\n  }, {\n    key: \"_getDecimal\",\n    value: function _getDecimal(number, fractions) {\n      var decimal = number.toString().split('.')[1];\n      var result = 0;\n      if (decimal) {\n        result = parseInt(decimal.slice(0, fractions), 10);\n        if (decimal.slice(1, 5) === '9999') {\n          result++;\n        }\n      }\n      return result;\n    }\n  }, {\n    key: \"_getRangeIcon\",\n    value: function _getRangeIcon(irange, turnOn) {\n      return turnOn ? irange.on || this.opt.starOn : irange.off || this.opt.starOff;\n    }\n  }, {\n    key: \"_getScoreByPosition\",\n    value: function _getScoreByPosition(evt, icon) {\n      var score = parseInt(icon.alt || icon.getAttribute('data-alt'), 10);\n      if (this.opt.half) {\n        var size = this._getWidth();\n        var percent = parseFloat((evt.pageX - icon.offsetLeft) / size);\n        score = score - 1 + percent;\n      }\n      return score;\n    }\n  }, {\n    key: \"_getHint\",\n    value: function _getHint(score, evt) {\n      if (score !== 0 && !score) {\n        return this.opt.noRatedMsg;\n      }\n      var integer = Math.ceil(score);\n      var group = this.opt.hints[(integer || 1) - 1];\n      var set = !evt || this.isMove;\n      var decimal = this._getDecimal(score, 1);\n      var hint = group;\n      if (this.opt.precision) {\n        if (set) {\n          decimal = decimal === 0 ? 9 : decimal - 1;\n        }\n        hint = group[decimal];\n      } else if (this.opt.halfShow || this.opt.half) {\n        decimal = set && decimal === 0 ? 1 : decimal > 5 ? 1 : 0;\n        hint = group[decimal];\n      }\n      return hint === '' ? '' : hint || score;\n    }\n  }, {\n    key: \"_getWidth\",\n    value: function _getWidth() {\n      var width = parseFloat(this.stars[0].offsetWidth) || 16;\n      if (!width) {\n        this._error('Could not get the icon width!');\n      }\n      return width;\n    }\n  }, {\n    key: \"_isReadOnly\",\n    value: function _isReadOnly() {\n      return {\n        \"true\": true\n      }[this.element.dataset.readOnly] || false;\n    }\n  }, {\n    key: \"_lock\",\n    value: function _lock() {\n      var hint = this._getHint(this.scoreField.value);\n      this.element.style.pointerEvents = 'none';\n      this.element.title = hint;\n      this.scoreField.readOnly = true;\n      this.stars.forEach(function (value) {\n        value.title = hint;\n      });\n      if (this.cancelButton) {\n        this.cancelButton.style.display = 'none';\n      }\n      this.element.dataset.readOnly = true;\n    }\n  }, {\n    key: \"_nameForIndex\",\n    value: function _nameForIndex(i) {\n      return this.opt.score && this.opt.score >= i ? 'starOn' : 'starOff';\n    }\n  }, {\n    key: \"_resetTitle\",\n    value: function _resetTitle() {\n      for (var i = 0; i < this.opt.number; i++) {\n        this.stars[i].title = this._getHint(i + 1);\n      }\n    }\n  }, {\n    key: \"_parseOptions\",\n    value: function _parseOptions(dataset) {\n      return Object.keys(dataset).reduce(function (acc, key) {\n        var value = {\n          \"true\": true,\n          \"false\": false\n        }[dataset[key]];\n        value = value !== null && value !== undefined ? value : dataset[key];\n        if (!isNaN(value) && Number.isInteger(parseFloat(value))) {\n          value = Number(value);\n        }\n        acc[key] = value;\n        return acc;\n      }, {});\n    }\n  }, {\n    key: \"_roundHalfScore\",\n    value: function _roundHalfScore(score) {\n      var integer = parseInt(score, 10);\n      var decimal = this._getDecimal(score, 1);\n      if (decimal !== 0) {\n        decimal = decimal > 5 ? 1 : 0.5;\n      }\n      return integer + decimal;\n    }\n  }, {\n    key: \"_roundStars\",\n    value: function _roundStars(score, evt) {\n      var name = this._starName(score, evt);\n      if (name) {\n        var icon = this.opt[name];\n        var star = this.stars[Math.ceil(score) - 1];\n        star && this._setIcon(star, icon);\n      }\n    }\n  }, {\n    key: \"_setIcon\",\n    value: function _setIcon(star, icon) {\n      star[this.opt.starType === 'img' ? 'src' : 'className'] = this.opt.path + icon;\n    }\n  }, {\n    key: \"_setPath\",\n    value: function _setPath() {\n      this.opt.path = this.opt.path || '';\n      if (this.opt.path && this.opt.path.slice(-1) !== '/') {\n        this.opt.path += '/';\n      }\n    }\n  }, {\n    key: \"_setTarget\",\n    value: function _setTarget(target, score) {\n      if (score) {\n        score = this.opt.targetFormat.toString().replace('{score}', score);\n      }\n      if (target instanceof HTMLInputElement || target instanceof HTMLSelectElement) {\n        target.value = score;\n      } else {\n        target.textContent = score;\n      }\n    }\n  }, {\n    key: \"_setTitle\",\n    value: function _setTitle(score, evt) {\n      if (score) {\n        var integer = parseInt(Math.ceil(score), 10);\n        var star = this.stars.item(integer - 1);\n        star.title = this._getHint(score, evt);\n      }\n    }\n  }, {\n    key: \"_starName\",\n    value: function _starName(score, evt) {\n      var decimal = +(score % 1).toFixed(2);\n      if (evt || this.isMove) {\n        return decimal > 0.5 ? 'starOn' : 'starHalf';\n      }\n      if (decimal <= this.opt.round.down) {\n        return;\n      }\n      if (this.opt.halfShow && decimal < this.opt.round.up) {\n        return 'starHalf';\n      }\n      if (decimal < this.opt.round.full) {\n        return 'starOff';\n      }\n      return 'starOn';\n    }\n  }, {\n    key: \"_target\",\n    value: function _target(score, evt) {\n      if (this.opt.target) {\n        var target = document.querySelector(this.opt.target);\n        if (!target) {\n          this._error('Target selector invalid or missing!');\n        }\n        var mouseover = evt && evt.type === 'mouseover';\n        if (score === undefined) {\n          score = this.opt.targetText;\n        } else if (score === null) {\n          score = mouseover ? this.opt.cancelHint : this.opt.targetText;\n        } else {\n          if (this.opt.targetType === 'hint') {\n            score = this._getHint(score, evt);\n          } else if (this.opt.precision) {\n            score = parseFloat(score).toFixed(1);\n          }\n          var mousemove = evt && evt.type === 'mousemove';\n          if (!mouseover && !mousemove && !this.opt.targetKeep) {\n            score = this.opt.targetText;\n          }\n        }\n        this._setTarget(target, score);\n      }\n    }\n  }, {\n    key: \"_turnOn\",\n    value: function _turnOn(i, score) {\n      return this.opt.single ? i === score : i <= score;\n    }\n  }, {\n    key: \"_unlock\",\n    value: function _unlock() {\n      this.element.style.cursor = 'pointer';\n      this.element.style.pointerEvents = 'auto';\n      this.element.removeAttribute('title');\n      this.element.dataset.readOnly = false;\n      this.scoreField.readOnly = false;\n      this._resetTitle();\n      if (this.cancelButton) {\n        this.cancelButton.style.display = '';\n      }\n    }\n  }]);\n  return Raty;\n}();","map":{"version":3,"names":["Raty","element","options","opt","defaultOptions","_parseOptions","dataset","cancelButton","cancelClass","cancelHint","cancelOff","cancelOn","cancelPlace","click","undefined","half","halfShow","hints","iconRange","iconRangeSame","mouseout","mouseover","noRatedMsg","number","numberMax","path","precision","readOnly","round","down","full","up","score","scoreName","single","space","starHalf","starOff","starOn","starType","target","targetFormat","targetKeep","targetScore","targetText","targetType","_isReadOnly","scoreField","removeAttribute","_adjustedScore","_apply","call","_target","integer","parseInt","decimal","_getDecimal","width","_getWidth","steps","star","stars","percent","offsetLeft","evt","Event","pageX","isMove","dispatchEvent","readonly","_lock","_binds","_unlock","arguments","length","setScore","getScore","value","push","_executeCallbacks","_adjustNumber","_adjustHints","_adjustStarName","_setPath","_createStars","_createCancel","_adjustPrecision","_createScore","_setTitle","style","cursor","_between","i","group","Object","prototype","toString","j","hint","last","replaces","replace","_fill","_roundStars","name","_nameForIndex","attributes","alt","src","title","_getHint","min","max","Math","parseFloat","_bindOverCancel","_bindClickCancel","_bindOutCancel","_bindOver","_bindClick","_bindOut","forEach","addEventListener","execute","_roundHalfScore","_resetTitle","icon","_setIcon","action","_getScoreByPosition","className","input","document","createElement","type","appendChild","button","setAttribute","classList","add","prepend","append","querySelector","_buildScoreField","_attributesForIndex","key","querySelectorAll","message","Error","hash","range","turnOn","_turnOn","irange","_getRangeIcon","fractions","split","result","slice","on","off","getAttribute","size","ceil","set","offsetWidth","_error","pointerEvents","display","keys","reduce","acc","isNaN","Number","isInteger","_starName","HTMLInputElement","HTMLSelectElement","textContent","item","toFixed","mousemove","_setTarget"],"sources":["/home/ec2-user/environment/tachikawa_gourmet_map/app/javascript/packs/raty.js"],"sourcesContent":["\"use strict\";\n\nclass Raty {\n  constructor(element, options = {}) {\n    this.element = element;\n    this.opt = {\n      ...this.defaultOptions(),\n      ...options,\n      ...this._parseOptions(element.dataset)\n    };\n  }\n  defaultOptions() {\n    return {\n      cancelButton: false,\n      cancelClass: 'raty-cancel',\n      cancelHint: 'Cancel this rating!',\n      cancelOff: 'cancel-off.png',\n      cancelOn: 'cancel-on.png',\n      cancelPlace: 'left',\n      click: undefined,\n      half: false,\n      halfShow: true,\n      hints: ['bad', 'poor', 'regular', 'good', 'gorgeous'],\n      iconRange: undefined,\n      iconRangeSame: false,\n      mouseout: undefined,\n      mouseover: undefined,\n      noRatedMsg: 'Not rated yet!',\n      number: 5,\n      numberMax: 20,\n      path: undefined,\n      precision: false,\n      readOnly: false,\n      round: {\n        down: 0.25,\n        full: 0.6,\n        up: 0.76\n      },\n      score: undefined,\n      scoreName: 'score',\n      single: false,\n      space: true,\n      starHalf: 'star-half.png',\n      starOff: 'star-off.png',\n      starOn: 'star-on.png',\n      starType: 'img',\n      target: undefined,\n      targetFormat: '{score}',\n      targetKeep: false,\n      targetScore: undefined,\n      targetText: '',\n      targetType: 'hint'\n    };\n  }\n  cancel(click) {\n    if (!this._isReadOnly()) {\n      this[click ? 'click' : 'score'](null);\n      this.scoreField.removeAttribute('value');\n    }\n  }\n\n  click(score) {\n    if (!this._isReadOnly()) {\n      score = this._adjustedScore(score);\n      this._apply(score);\n      if (this.opt.click) {\n        this.opt.click.call(this, score, this.element);\n      }\n      this._target(score);\n    }\n  }\n\n  move(score) {\n    var integer = parseInt(score, 10);\n    var decimal = this._getDecimal(score, 1);\n    if (integer >= this.opt.number) {\n      integer = this.opt.number - 1;\n      decimal = 10;\n    }\n    var width = this._getWidth();\n    var steps = width / 10;\n    var star = this.stars[integer];\n    var percent = star.offsetLeft + steps * decimal;\n    var evt = new Event('mousemove');\n    evt.pageX = percent;\n    this.isMove = true;\n    star.dispatchEvent(evt);\n    this.isMove = false;\n  }\n\n  readOnly(readonly) {\n    if (this._isReadOnly() !== readonly) {\n      if (readonly) {\n        this._lock();\n      } else {\n        this._binds();\n        this._unlock();\n      }\n      this.element.dataset.readOnly = readonly;\n    }\n  }\n  score() {\n    return arguments.length ? this.setScore(arguments[0]) : this.getScore();\n  }\n  setScore(score) {\n    if (!this._isReadOnly()) {\n      score = this._adjustedScore(score);\n      this._apply(score);\n      this._target(score);\n    }\n  }\n  getScore() {\n    var score = [];\n    var value;\n    value = this.scoreField.value;\n    score.push(value ? +value : undefined);\n    return score.length > 1 ? score : score[0];\n  }\n  init() {\n    this._executeCallbacks();\n    this._adjustNumber();\n    this._adjustHints();\n    this.opt.score = this._adjustedScore(this.opt.score);\n    if (this.opt.starType !== 'img') {\n      this._adjustStarName();\n    }\n    this._setPath();\n    this._createStars();\n    if (this.opt.cancelButton) {\n      this._createCancel();\n    }\n    if (this.opt.precision) {\n      this._adjustPrecision();\n    }\n    this._createScore();\n    this._apply(this.opt.score);\n    this._setTitle(this.opt.score);\n    this._target(this.opt.score);\n    if (this.opt.readOnly) {\n      this._lock();\n    } else {\n      this.element.style.cursor = 'pointer';\n      this._binds();\n    }\n    return this;\n  }\n\n  _adjustedScore(score) {\n    if (score || score === 0) {\n      return this._between(score, 0, this.opt.number);\n    }\n  }\n  _adjustHints() {\n    if (!this.opt.hints) {\n      this.opt.hints = [];\n    }\n    if (!this.opt.halfShow && !this.opt.half) {\n      return;\n    }\n    var steps = this.opt.precision ? 10 : 2;\n    for (let i = 0; i < this.opt.number; i++) {\n      var group = this.opt.hints[i];\n      if (Object.prototype.toString.call(group) !== '[object Array]') {\n        group = [group];\n      }\n      this.opt.hints[i] = [];\n      for (let j = 0; j < steps; j++) {\n        var hint = group[j];\n        var last = group[group.length - 1];\n        if (last === undefined) {\n          last = null;\n        }\n        this.opt.hints[i][j] = hint === undefined ? last : hint;\n      }\n    }\n  }\n  _adjustNumber() {\n    this.opt.number = this._between(this.opt.number, 1, this.opt.numberMax);\n  }\n  _adjustPrecision() {\n    this.opt.half = true;\n  }\n  _adjustStarName() {\n    const replaces = ['cancelOff', 'cancelOn', 'starHalf', 'starOff', 'starOn'];\n    this.opt.path = '';\n    for (let i = 0; i < replaces.length; i++) {\n      this.opt[replaces[i]] = this.opt[replaces[i]].replace('.', '-');\n    }\n  }\n\n  _apply(score) {\n    this._fill(score);\n    if (score) {\n      if (score > 0) {\n        this.scoreField.value = score;\n      }\n      this._roundStars(score);\n    }\n  }\n  _attributesForIndex(i) {\n    var name = this._nameForIndex(i);\n    var attributes = {\n      alt: i,\n      src: this.opt.path + this.opt[name]\n    };\n    if (this.opt.starType !== 'img') {\n      attributes = {\n        'data-alt': i,\n        'class': this.opt[name]\n      };\n    }\n    attributes.title = this._getHint(i);\n    return attributes;\n  }\n  _between(value, min, max) {\n    return Math.min(Math.max(parseFloat(value), min), max);\n  }\n\n  _binds() {\n    if (this.cancelButton) {\n      this._bindOverCancel();\n      this._bindClickCancel();\n      this._bindOutCancel();\n    }\n    this._bindOver();\n    this._bindClick();\n    this._bindOut();\n  }\n\n  _bindClick() {\n    this.stars.forEach(value => {\n      value.addEventListener('click', evt => {\n        if (this._isReadOnly()) {\n          return;\n        }\n        let execute;\n        let score = this.opt.half || this.opt.precision ? this.element.dataset.score : value.alt || value.dataset.alt;\n        if (this.opt.half && !this.opt.precision) {\n          score = this._roundHalfScore(score);\n        }\n        if (this.opt.click) {\n          execute = this.opt.click.call(this, +score, this.element, evt);\n        }\n        if (execute || execute === undefined) {\n          this._apply(+score);\n        }\n      });\n    });\n  }\n\n  _bindClickCancel() {\n    this.cancelButton.addEventListener('click', evt => {\n      this.scoreField.removeAttribute('value');\n      if (this.opt.click) {\n        this.opt.click.call(this, null, this.element, evt);\n      }\n    });\n  }\n\n  _bindOut() {\n    this.element.addEventListener('mouseleave', evt => {\n      const score = +this.scoreField.value || undefined;\n      this._apply(score);\n      this._target(score, evt);\n      this._resetTitle();\n      if (this.opt.mouseout) {\n        this.opt.mouseout.call(this, score, this.element, evt);\n      }\n    });\n  }\n\n  _bindOutCancel() {\n    this.cancelButton.addEventListener('mouseleave', evt => {\n      let icon = this.opt.cancelOff;\n      if (this.opt.starType !== 'img') {\n        icon = `${this.opt.cancelClass} ${icon}`;\n      }\n      this._setIcon(this.cancelButton, icon);\n      if (this.opt.mouseout) {\n        const score = +this.scoreField.value || undefined;\n        this.opt.mouseout.call(this, score, this.element, evt);\n      }\n    });\n  }\n\n  _bindOver() {\n    const action = this.opt.half ? 'mousemove' : 'mouseover';\n    this.stars.forEach(value => {\n      value.addEventListener(action, evt => {\n        const score = this._getScoreByPosition(evt, value);\n        this._fill(score);\n        if (this.opt.half) {\n          this._roundStars(score, evt);\n          this._setTitle(score, evt);\n          this.element.dataset.score = score;\n        }\n        this._target(score, evt);\n        if (this.opt.mouseover) {\n          this.opt.mouseover.call(this, score, this.element, evt);\n        }\n      });\n    });\n  }\n\n  _bindOverCancel() {\n    this.cancelButton.addEventListener('mouseover', evt => {\n      if (this._isReadOnly()) {\n        return;\n      }\n      const starOff = this.opt.path + this.opt.starOff;\n      let icon = this.opt.cancelOn;\n      if (this.opt.starType === 'img') {\n        this.stars.forEach(value => {\n          value.src = starOff;\n        });\n      } else {\n        icon = this.opt.cancelClass + ' ' + icon;\n        this.stars.forEach(value => {\n          value.className = starOff;\n        });\n      }\n      this._setIcon(this.cancelButton, icon);\n      this._target(null, evt);\n      if (this.opt.mouseover) {\n        this.opt.mouseover.call(this, null, this.element, evt);\n      }\n    });\n  }\n\n  _buildScoreField() {\n    const input = document.createElement('input');\n    input.name = this.opt.scoreName;\n    input.type = 'hidden';\n    this.element.appendChild(input);\n    return input;\n  }\n\n  _createCancel() {\n    const button = document.createElement(this.opt.starType);\n    const icon = this.opt.path + this.opt.cancelOff;\n    button.setAttribute('class', this.opt.cancelClass);\n    button.setAttribute('title', this.opt.cancelHint);\n    if (this.opt.starType === 'img') {\n      button.setAttribute('alt', 'x');\n      button.setAttribute('src', icon);\n    } else {\n      button.classList.add(icon);\n\n      button.setAttribute('data-alt', 'x');\n    }\n    if (this.opt.cancelPlace === 'left') {\n      this.element.prepend('\\u00A0');\n      this.element.prepend(button);\n    } else {\n      this.element.append('\\u00A0');\n      this.element.appendChild(button);\n    }\n    this.cancelButton = button;\n  }\n\n  _createScore() {\n    this.scoreField = document.querySelector(this.opt.targetScore) || this._buildScoreField();\n  }\n  _createStars() {\n    for (let i = 1; i <= this.opt.number; i++) {\n      const attributes = this._attributesForIndex(i);\n      let star = document.createElement(this.opt.starType);\n      for (const key in attributes) {\n        star.setAttribute(key, attributes[key]);\n      }\n      this.element.appendChild(star);\n      if (this.opt.space && i < this.opt.number) {\n        this.element.append('\\u00A0');\n      }\n    }\n    this.stars = this.element.querySelectorAll(this.opt.starType);\n  }\n\n  _error(message) {\n    throw new Error(message);\n  }\n  _executeCallbacks() {\n    const options = ['number', 'readOnly', 'score', 'scoreName', 'target', 'path'];\n    for (let i = 0; i < options.length; i++) {\n      if (typeof this.opt[options[i]] === 'function') {\n        const value = this.opt[options[i]].call(this, this.element);\n        if (value) {\n          this.opt[options[i]] = value;\n        } else {\n          delete this.opt[options[i]];\n        }\n      }\n    }\n  }\n\n  _fill(score) {\n    let hash = 0;\n    if (this.opt.iconRangeSame && this.opt.iconRange) {\n      while (hash < this.opt.iconRange.length && this.opt.iconRange[hash].range < score) {\n        hash++;\n      }\n    }\n    for (let i = 1; i <= this.stars.length; i++) {\n      const star = this.stars[i - 1];\n      const turnOn = this._turnOn(i, score);\n      let icon;\n      if (this.opt.iconRange && this.opt.iconRange.length > hash) {\n        const irange = this.opt.iconRange[hash];\n        icon = this._getRangeIcon(irange, turnOn);\n        if (i <= irange.range) {\n          this._setIcon(star, icon);\n        }\n        if (i === irange.range) {\n          hash++;\n        }\n      } else {\n        icon = this.opt[turnOn ? 'starOn' : 'starOff'];\n        this._setIcon(star, icon);\n      }\n    }\n  }\n  _getDecimal(number, fractions) {\n    const decimal = number.toString().split('.')[1];\n    let result = 0;\n    if (decimal) {\n      result = parseInt(decimal.slice(0, fractions), 10);\n      if (decimal.slice(1, 5) === '9999') {\n        result++;\n      }\n    }\n    return result;\n  }\n\n  _getRangeIcon(irange, turnOn) {\n    return turnOn ? irange.on || this.opt.starOn : irange.off || this.opt.starOff;\n  }\n\n  _getScoreByPosition(evt, icon) {\n    let score = parseInt(icon.alt || icon.getAttribute('data-alt'), 10);\n    if (this.opt.half) {\n      const size = this._getWidth();\n      const percent = parseFloat((evt.pageX - icon.offsetLeft) / size);\n      score = score - 1 + percent;\n    }\n    return score;\n  }\n\n  _getHint(score, evt) {\n    if (score !== 0 && !score) {\n      return this.opt.noRatedMsg;\n    }\n    const integer = Math.ceil(score);\n    const group = this.opt.hints[(integer || 1) - 1];\n    const set = !evt || this.isMove;\n    let decimal = this._getDecimal(score, 1);\n    let hint = group;\n    if (this.opt.precision) {\n      if (set) {\n        decimal = decimal === 0 ? 9 : decimal - 1;\n      }\n      hint = group[decimal];\n    } else if (this.opt.halfShow || this.opt.half) {\n      decimal = set && decimal === 0 ? 1 : decimal > 5 ? 1 : 0;\n      hint = group[decimal];\n    }\n    return hint === '' ? '' : hint || score;\n  }\n\n  _getWidth() {\n    const width = parseFloat(this.stars[0].offsetWidth) || 16;\n    if (!width) {\n      this._error('Could not get the icon width!');\n    }\n    return width;\n  }\n  _isReadOnly() {\n    return {\n      true: true\n    }[this.element.dataset.readOnly] || false;\n  }\n\n  _lock() {\n    const hint = this._getHint(this.scoreField.value);\n    this.element.style.pointerEvents = 'none';\n    this.element.title = hint;\n    this.scoreField.readOnly = true;\n    this.stars.forEach(value => {\n      value.title = hint;\n    });\n    if (this.cancelButton) {\n      this.cancelButton.style.display = 'none';\n    }\n    this.element.dataset.readOnly = true;\n  }\n  _nameForIndex(i) {\n    return this.opt.score && this.opt.score >= i ? 'starOn' : 'starOff';\n  }\n\n  _resetTitle() {\n    for (let i = 0; i < this.opt.number; i++) {\n      this.stars[i].title = this._getHint(i + 1);\n    }\n  }\n  _parseOptions(dataset) {\n    return Object.keys(dataset).reduce((acc, key) => {\n      let value = {\n        true: true,\n        false: false\n      }[dataset[key]];\n      value = value !== null && value !== undefined ? value : dataset[key];\n      if (!isNaN(value) && Number.isInteger(parseFloat(value))) {\n        value = Number(value);\n      }\n      acc[key] = value;\n      return acc;\n    }, {});\n  }\n\n  _roundHalfScore(score) {\n    const integer = parseInt(score, 10);\n    let decimal = this._getDecimal(score, 1);\n    if (decimal !== 0) {\n      decimal = decimal > 5 ? 1 : 0.5;\n    }\n    return integer + decimal;\n  }\n\n  _roundStars(score, evt) {\n    const name = this._starName(score, evt);\n    if (name) {\n      const icon = this.opt[name];\n      const star = this.stars[Math.ceil(score) - 1];\n      star && this._setIcon(star, icon);\n    }\n  }\n\n  _setIcon(star, icon) {\n    star[this.opt.starType === 'img' ? 'src' : 'className'] = this.opt.path + icon;\n  }\n  _setPath() {\n    this.opt.path = this.opt.path || '';\n    if (this.opt.path && this.opt.path.slice(-1) !== '/') {\n      this.opt.path += '/';\n    }\n  }\n\n  _setTarget(target, score) {\n    if (score) {\n      score = this.opt.targetFormat.toString().replace('{score}', score);\n    }\n    if (target instanceof HTMLInputElement || target instanceof HTMLSelectElement) {\n      target.value = score;\n    } else {\n      target.textContent = score;\n    }\n  }\n\n  _setTitle(score, evt) {\n    if (score) {\n      const integer = parseInt(Math.ceil(score), 10);\n      const star = this.stars.item(integer - 1);\n      star.title = this._getHint(score, evt);\n    }\n  }\n  _starName(score, evt) {\n    const decimal = +(score % 1).toFixed(2);\n    if (evt || this.isMove) {\n      return decimal > 0.5 ? 'starOn' : 'starHalf';\n    }\n    if (decimal <= this.opt.round.down) {\n      return;\n    }\n    if (this.opt.halfShow && decimal < this.opt.round.up) {\n      return 'starHalf';\n    }\n    if (decimal < this.opt.round.full) {\n      return 'starOff';\n    }\n    return 'starOn';\n  }\n\n  _target(score, evt) {\n    if (this.opt.target) {\n      const target = document.querySelector(this.opt.target);\n      if (!target) {\n        this._error('Target selector invalid or missing!');\n      }\n      const mouseover = evt && evt.type === 'mouseover';\n      if (score === undefined) {\n        score = this.opt.targetText;\n      } else if (score === null) {\n        score = mouseover ? this.opt.cancelHint : this.opt.targetText;\n      } else {\n        if (this.opt.targetType === 'hint') {\n          score = this._getHint(score, evt);\n        } else if (this.opt.precision) {\n          score = parseFloat(score).toFixed(1);\n        }\n        const mousemove = evt && evt.type === 'mousemove';\n        if (!mouseover && !mousemove && !this.opt.targetKeep) {\n          score = this.opt.targetText;\n        }\n      }\n      this._setTarget(target, score);\n    }\n  }\n\n  _turnOn(i, score) {\n    return this.opt.single ? i === score : i <= score;\n  }\n\n  _unlock() {\n    this.element.style.cursor = 'pointer';\n    this.element.style.pointerEvents = 'auto';\n    this.element.removeAttribute('title');\n    this.element.dataset.readOnly = false;\n    this.scoreField.readOnly = false;\n    this._resetTitle();\n    if (this.cancelButton) {\n      this.cancelButton.style.display = '';\n    }\n  }\n}"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}